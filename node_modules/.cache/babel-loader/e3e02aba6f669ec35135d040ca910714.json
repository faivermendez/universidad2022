{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"E:\\\\Descargas\\\\NUEVA GRANADA\\\\src\\\\components\\\\Entrar\\\\Entrar.js\",\n    _s = $RefreshSig$();\n\nimport ChickenImg from \"../../images/Big-chicken.svg\";\nimport React, { useContext, useState, useEffect } from 'react';\nimport P12 from '../../images/foto12.jpg';\nimport LN from '../../images/LN.png';\nimport { Entrar } from '..';\nimport { Center, Form, H1, WrappLogin, Input, Button } from \"../styles\";\nimport { AuthGlobal } from \"../context/store/Auth\";\nimport { setCurrentUser, logoutUser } from \"../context/actions/autenticacion.action\";\nimport Error from \"../components/Error\";\nimport jwt_decode from \"jwt-decode\";\nimport axios from 'axios';\n\nconst Login = () => {\n  _s();\n\n  const context = useContext(AuthGlobal);\n  const [correo, setcorreo] = useState(\"\");\n  const [clave, setclave] = useState(\"\");\n  const [error, seterror] = useState(null);\n\n  const loginUser = user => {\n    const {\n      correo,\n      clave\n    } = user;\n    axios.post('http://localhost:3001/server/login', {\n      correo,\n      clave\n    }).then(response => {\n      if (response.data.ok === true) {\n        jwtToken(response.data.token);\n      } else {\n        seterror(response.data.err.message);\n        logoutUser(context.dispatch);\n      }\n    }).catch(error => {\n      seterror(error.response.data.err.message);\n      logoutUser(context.dispatch);\n    });\n  };\n\n  const jwtToken = token => {\n    localStorage.setItem(\"jwt\", token);\n    const decoded = jwt_decode(token);\n    seterror(null);\n    context.dispatch(setCurrentUser(decoded));\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const user = {\n      correo,\n      clave\n    };\n\n    if (correo === \"\" || clave === \"\") {\n      seterror(\"Ingrese datos correctamente\");\n    } else {\n      loginUser(user);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Center, {\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(H1, {\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(WrappLogin, {\n        children: [/*#__PURE__*/_jsxDEV(Input, {\n          placeholder: \"Ingrese el correo\",\n          onChange: e => setcorreo(e.target.value),\n          id: \"correo\",\n          name: \"correo\",\n          value: correo,\n          autoComplete: \"off\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"password\",\n          placeholder: \"Ingrese su Clave\",\n          onChange: e => setclave(e.target.value),\n          id: \"clave\",\n          name: \"clave\",\n          value: clave\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          children: \"Ingresar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), error ? /*#__PURE__*/_jsxDEV(Error, {\n          mensaje: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 20\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Login, \"xsLJNKVSQU1rDqU2WmLjY2Wyr8M=\");\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["E:/Descargas/NUEVA GRANADA/src/components/Entrar/Entrar.js"],"names":["React","useContext","useState","useEffect","P12","LN","Entrar","Center","Form","H1","WrappLogin","Input","Button","AuthGlobal","setCurrentUser","logoutUser","Error","jwt_decode","axios","Login","context","correo","setcorreo","clave","setclave","error","seterror","loginUser","user","post","then","response","data","ok","jwtToken","token","err","message","dispatch","catch","localStorage","setItem","decoded","handleSubmit","e","preventDefault","target","value"],"mappings":"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","sourcesContent":["\r\nimport ChickenImg from '../../images/Big-chicken.svg';\r\nimport React, {useContext, useState, useEffect} from 'react';\r\n\r\n\r\n\r\nimport P12 from '../../images/foto12.jpg';\r\nimport LN from '../../images/LN.png';\r\nimport { Entrar } from '..';\r\n\r\n\r\nimport { Center, Form, H1, WrappLogin, Input, Button } from \"../styles\";\r\nimport { AuthGlobal } from \"../context/store/Auth\";\r\nimport { setCurrentUser, logoutUser } from \"../context/actions/autenticacion.action\";\r\nimport Error from \"../components/Error\";\r\n\r\nimport jwt_decode from \"jwt-decode\";\r\nimport axios from 'axios'\r\n\r\nconst Login = () => {\r\n  const context = useContext(AuthGlobal);\r\n  const [correo, setcorreo] = useState(\"\");\r\n  const [clave, setclave] = useState(\"\");\r\n  const [error, seterror] = useState(null);\r\n\r\n  const loginUser = user => {\r\n      const {correo, clave} = user\r\n      axios.post('http://localhost:3001/server/login', {\r\n        correo,\r\n        clave\r\n      })\r\n      .then( response => {\r\n        if (response.data.ok === true) {\r\n            jwtToken(response.data.token)\r\n          } else {\r\n            seterror(response.data.err.message)\r\n            logoutUser(context.dispatch);\r\n          }\r\n      })\r\n      .catch( error => {\r\n        seterror(error.response.data.err.message)\r\n        logoutUser(context.dispatch);\r\n      });\r\n  };\r\n\r\n  const jwtToken = token => {\r\n    localStorage.setItem(\"jwt\", token);\r\n    const decoded = jwt_decode(token);\r\n    seterror(null)\r\n    context.dispatch(setCurrentUser(decoded));\r\n  }\r\n\r\n  const handleSubmit = e => {\r\n    e.preventDefault();\r\n    const user = { correo, clave };\r\n\r\n    if (correo === \"\" || clave === \"\") {\r\n      seterror(\"Ingrese datos correctamente\");\r\n    } else {\r\n      loginUser(user);\r\n    }\r\n    \r\n  };\r\n\r\n  return (\r\n    <Center>\r\n      <Form onSubmit={handleSubmit}>\r\n        <H1>Login</H1>\r\n        <WrappLogin>\r\n          <Input\r\n            placeholder=\"Ingrese el correo\"\r\n            onChange={(e) => setcorreo(e.target.value)}\r\n            id=\"correo\"\r\n            name=\"correo\"\r\n            value={correo}\r\n            autoComplete=\"off\"\r\n          />\r\n          <Input\r\n            type=\"password\"\r\n            placeholder=\"Ingrese su Clave\"\r\n            onChange={(e) => setclave(e.target.value)}\r\n            id=\"clave\"\r\n            name=\"clave\"\r\n            value={clave}\r\n          />\r\n          <br />\r\n\r\n          <Button type=\"submit\">Ingresar</Button>\r\n          {error ? <Error mensaje={error} /> : null}\r\n        </WrappLogin>\r\n      </Form>\r\n    </Center>\r\n  );\r\n}\r\n\r\nexport default Login\r\n"]},"metadata":{},"sourceType":"module"}